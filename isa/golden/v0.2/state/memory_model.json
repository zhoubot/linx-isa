{
  "notes": [
    "This file defines the Linx memory ordering contract in Linx terms.",
    "The goal is a weakly-ordered model with explicit acquire/release and fence operations, suitable for out-of-order implementations."
  ],
  "model": {
    "endianness": "little",
    "default_memory_type": "Normal",
    "coherence": {
      "per_location_total_order": true,
      "scope": "Normal"
    },
    "ordering": {
      "base_load_store": "Relaxed",
      "atomic_qualifiers": {
        "aq": "Acquire",
        "rl": "Release",
        "aqrl": "AcquireRelease"
      },
      "tma": {
        "ops": [
          "TLOAD",
          "TSTORE"
        ],
        "domain": "Normal",
        "semantics": [
          "TLOAD/TSTORE are architectural memory operations in the same global ordering domain as scalar loads/stores for the current LXCPU.",
          "TLOAD/TSTORE participate in the Linx ordering rules, including acquire/release qualifiers (e.g. B.ATTR.{aq,rl,aqrl}) and fence operations where applicable.",
          "Minimal correctness rule: a core must not allow a TSTORE to become visible before an older scalar store from the same LXCPU that is ordered-before it (and similarly, a TLOAD must not bypass older ordered stores)."
        ]
      }
    },
    "fences": {
      "FENCE.D": {
        "pred_succ_bitmap_bits": [
          "R (normal reads)",
          "W (normal writes)",
          "O (device/MMIO)",
          "I (instruction fetch visibility)"
        ],
        "semantics": [
          "Orders memory operations of the classes selected by pred_imm before subsequent operations selected by succ_imm in program order for the current LXCPU.",
          "If pred_imm and succ_imm include O, the fence orders device/MMIO accesses with respect to normal memory accesses.",
          "If pred_imm or succ_imm include I, the fence additionally provides instruction-fetch visibility ordering similar to FENCE.I."
        ]
      },
      "FENCE.I": {
        "semantics": [
          "Ensures instruction fetch observes prior stores from the current LXCPU to memory that may be executed as code.",
          "Defines the architectural boundary for self-modifying code and code generation."
        ]
      }
    }
  }
}
