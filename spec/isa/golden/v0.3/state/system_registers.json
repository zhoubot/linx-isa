{
  "notes": [
    "v0.3 staged profile system registers (SSR) and trap envelope definitions.",
    "v0.3 staged profile preserves the v0.2 ACR/EBARG/TRAPNO baseline while integrating reconciled AI-extension semantics.",
    "This file is the canonical source for SSR IDs, EBARG layout, and TRAPNO encoding used by the ISA manual, QEMU, Linux, and LLVM."
  ],
  "xlen_bits": 64,
  "ssr": {
    "base": [
      { "id": "0x0000", "name": "TP", "width_bits": 64, "access": "RW", "description": "Thread pointer (TLS base)." },
      { "id": "0x0001", "name": "GP", "width_bits": 64, "access": "RW", "description": "Global pointer (global data base)." },
      { "id": "0x0010", "name": "TIME", "width_bits": 64, "access": "RO", "description": "Timer counter." },
      { "id": "0x0C00", "name": "CYCLE", "width_bits": 64, "access": "RO", "description": "Cycle counter (bring-up may model as instruction count)." },
      { "id": "0x0020", "name": "CSTATE", "width_bits": 64, "access": "RW", "description": "Common state (privilege + execution state). Includes active ACR and interrupt mask." },
      { "id": "0x0021", "name": "LXLCID", "width_bits": 64, "access": "RO", "description": "Linx logical core ID." },
      { "id": "0x0022", "name": "VENDOR", "width_bits": 64, "access": "RO", "description": "Vendor ID." },
      { "id": "0x0023", "name": "VERSION", "width_bits": 64, "access": "RO", "description": "Core version." },
      { "id": "0x0024", "name": "LCFR", "width_bits": 64, "access": "RO", "description": "Core feature description (includes LaneNum)." },
      { "id": "0x0025", "name": "LCFR_EN", "width_bits": 64, "access": "RW", "description": "Core feature enable." },

      { "id": "0x0050", "name": "LB0", "width_bits": 64, "access": "RW", "description": "Loop/lane boundary register 0 (bring-up)." },
      { "id": "0x0051", "name": "LB1", "width_bits": 64, "access": "RW", "description": "Loop/lane boundary register 1 (bring-up)." },
      { "id": "0x0052", "name": "LB2", "width_bits": 64, "access": "RW", "description": "Loop/lane boundary register 2 (bring-up)." },
      { "id": "0x0053", "name": "LC0", "width_bits": 64, "access": "RW", "description": "Loop/lane counter register 0 (bring-up)." },
      { "id": "0x0054", "name": "LC1", "width_bits": 64, "access": "RW", "description": "Loop/lane counter register 1 (bring-up)." },
      { "id": "0x0055", "name": "LC2", "width_bits": 64, "access": "RW", "description": "Loop/lane counter register 2 (bring-up)." }
    ],
    "manager_acr_family": {
      "id_pattern": "0xnfxx",
      "description": "Manager-ACR (privileged) SSR family. Full SSR_ID is 16-bit where n is the manager ACR ID and low 12 bits select the index.",
      "entries": [
        { "idx": "0xF00", "name": "ECSTATE_ACRn", "width_bits": 64, "access": "RW", "description": "Exception state. Mirrors key CSTATE fields. Includes BI and ACR target for ACRE." },
        { "idx": "0xF01", "name": "EVBASE_ACRn", "width_bits": 64, "access": "RW", "description": "Exception vector base." },
        { "idx": "0xF02", "name": "TRAPNO_ACRn", "width_bits": 64, "access": "RW", "description": "Trap number encoding (E/ARGV/CAUSE/TRAPNUM)." },
        { "idx": "0xF03", "name": "TRAPARG0_ACRn", "width_bits": 64, "access": "RW", "description": "Trap argument 0 (valid when TRAPNO.ARGV=1)." },
        { "idx": "0xF05", "name": "ETEMP_ACRn", "width_bits": 64, "access": "RW", "description": "Exception temporary register." },
        { "idx": "0xF06", "name": "ETEMP0_ACRn", "width_bits": 64, "access": "RW", "description": "Exception temporary register 0 (v0.2 bring-up)." },
        { "idx": "0xF07", "name": "ECONFIG_ACRn", "width_bits": 64, "access": "RW", "description": "Exception/interrupt configuration." },
        { "idx": "0xF08", "name": "IPENDING_ACRn", "width_bits": 64, "access": "RW", "description": "Interrupt pending bitmap." },
        { "idx": "0xF09", "name": "TOPEI_ACRn", "width_bits": 64, "access": "RW", "description": "Top pending interrupt ID." },
        { "idx": "0xF0A", "name": "EOIEI_ACRn", "width_bits": 64, "access": "WO", "description": "End-of-interrupt." },

        { "idx": "0xF10", "name": "TTBR0_ACR1", "width_bits": 64, "access": "RW", "description": "CPU MMU table base register 0 (ACR1)." },
        { "idx": "0xF11", "name": "TTBR1_ACR1", "width_bits": 64, "access": "RW", "description": "CPU MMU table base register 1 (ACR1)." },
        { "idx": "0xF12", "name": "TCR_ACR1", "width_bits": 64, "access": "RW", "description": "CPU MMU translation control (ACR1)." },
        { "idx": "0xF13", "name": "MAIR_ACR1", "width_bits": 64, "access": "RW", "description": "CPU MMU memory attribute indirection register (ACR1)." },
        { "idx": "0xF14", "name": "IOTTBR_ACR1", "width_bits": 64, "access": "RW", "description": "IOMMU translation table base (ACR1)." },
        { "idx": "0xF15", "name": "IOTCR_ACR1", "width_bits": 64, "access": "RW", "description": "IOMMU translation control (ACR1)." },
        { "idx": "0xF16", "name": "IOMAIR_ACR1", "width_bits": 64, "access": "RW", "description": "IOMMU memory attribute indirection register (ACR1)." },

        { "idx": "0xF20", "name": "TIMER_TIME_ACRn", "width_bits": 64, "access": "RO", "description": "Timer register." },
        { "idx": "0xF21", "name": "TIMER_TIMECMP_ACRn", "width_bits": 64, "access": "RW", "description": "Timer compare register." }
      ]
    }
  },
  "ebarg_group": {
    "base_idx": "0xF40",
    "description": "EBARG is the authoritative trap/context snapshot for v0.2. EBARG words are ACR-scoped manager-family SSRs (0xnf40+).",
    "entries": [
      { "idx": "0xF40", "name": "EBARG0_ACRn", "width_bits": 64, "access": "RW", "description": "Packed control word: BlockType, GroupID, TYPE/TAKEN/TRAP, order attributes." },
      { "idx": "0xF41", "name": "EBARG_BPC_CUR_ACRn", "width_bits": 64, "access": "RW", "description": "Current block start PC (BPC.CUR)." },
      { "idx": "0xF42", "name": "EBARG_BPC_TGT_ACRn", "width_bits": 64, "access": "RW", "description": "Next block PC target (BPC.TGT)." },
      { "idx": "0xF43", "name": "EBARG_TPC_ACRn", "width_bits": 64, "access": "RW", "description": "Body resume PC (TPC). Valid when ECSTATE.BI=1." },
      { "idx": "0xF44", "name": "EBARG_LRA_ACRn", "width_bits": 64, "access": "RW", "description": "Local return address (LRA) for split/decoupled blocks." },

      { "idx": "0xF45", "name": "EBARG_TQ0_ACRn", "width_bits": 64, "access": "RW", "description": "T-hand queue entry 0." },
      { "idx": "0xF46", "name": "EBARG_TQ1_ACRn", "width_bits": 64, "access": "RW", "description": "T-hand queue entry 1." },
      { "idx": "0xF47", "name": "EBARG_TQ2_ACRn", "width_bits": 64, "access": "RW", "description": "T-hand queue entry 2." },
      { "idx": "0xF48", "name": "EBARG_TQ3_ACRn", "width_bits": 64, "access": "RW", "description": "T-hand queue entry 3." },

      { "idx": "0xF49", "name": "EBARG_UQ0_ACRn", "width_bits": 64, "access": "RW", "description": "U-hand queue entry 0." },
      { "idx": "0xF4A", "name": "EBARG_UQ1_ACRn", "width_bits": 64, "access": "RW", "description": "U-hand queue entry 1." },
      { "idx": "0xF4B", "name": "EBARG_UQ2_ACRn", "width_bits": 64, "access": "RW", "description": "U-hand queue entry 2." },
      { "idx": "0xF4C", "name": "EBARG_UQ3_ACRn", "width_bits": 64, "access": "RW", "description": "U-hand queue entry 3." },

      { "idx": "0xF4D", "name": "EBARG_LB_ACRn", "width_bits": 64, "access": "RW", "description": "Packed LB0..LB2 as 16-bit each (low bits)." },
      { "idx": "0xF4E", "name": "EBARG_LC_ACRn", "width_bits": 64, "access": "RW", "description": "Packed LC0..LC2 as 16-bit each (low bits)." },
      { "idx": "0xF4F", "name": "EBARG_EXTCTX_PTR_ACRn", "width_bits": 64, "access": "RW", "description": "Pointer to extended-context buffer for ESAVE/ERCOV." },
      { "idx": "0xF50", "name": "EBARG_EXTCTX_META_ACRn", "width_bits": 64, "access": "RW", "description": "Extended-context metadata (kind/version/length/checksum; profile-defined)." }
    ]
  },
  "debug_ssr": {
    "base_idx": "0xF80",
    "description": "v0.2 bring-up debug SSRs (breakpoints/watchpoints with optional linking).",
    "counts": { "context_bp": 1, "addr_bp": 4, "watchpoint": 4 },
    "entries": [
      { "idx": "0xF80", "name": "DBGID_ACRn", "width_bits": 64, "access": "RO", "description": "Debug capability ID register (CPs/BPs/WPs)." },

      { "idx_base": "0xF90", "stride": 2, "count": 4, "name_fmt": "DBCR%d_ACRn", "width_bits": 64, "access": "RW", "description": "Address breakpoint control." },
      { "idx_base": "0xF91", "stride": 2, "count": 4, "name_fmt": "DBVR%d_ACRn", "width_bits": 64, "access": "RW", "description": "Address breakpoint value (full address)." },

      { "idx_base": "0xFA0", "stride": 2, "count": 1, "name_fmt": "DCCR%d_ACRn", "width_bits": 64, "access": "RW", "description": "Context breakpoint control." },
      { "idx_base": "0xFA1", "stride": 2, "count": 1, "name_fmt": "DCVR%d_ACRn", "width_bits": 64, "access": "RW", "description": "Context breakpoint value (LC0/LC1/LC2)." },

      { "idx_base": "0xFB0", "stride": 2, "count": 4, "name_fmt": "DWCR%d_ACRn", "width_bits": 64, "access": "RW", "description": "Watchpoint control." },
      { "idx_base": "0xFB1", "stride": 2, "count": 4, "name_fmt": "DWVR%d_ACRn", "width_bits": 64, "access": "RW", "description": "Watchpoint value (full address)." }
    ]
  },
  "trapno_encoding": {
    "notes": [
      "TRAPNO is shared for faults, traps, and interrupts.",
      "E=1 indicates asynchronous interrupt; E=0 indicates synchronous fault/trap.",
      "ARGV=1 indicates TRAPARG0 is valid."
    ],
    "fields": [
      { "name": "E", "msb": 63, "lsb": 63, "description": "Asynchronous interrupt indicator (1=async interrupt, 0=sync fault/trap)." },
      { "name": "ARGV", "msb": 62, "lsb": 62, "description": "TRAPARG0 valid (1=valid)." },
      { "name": "CAUSE", "msb": 47, "lsb": 24, "description": "Sub-cause encoding (profile-defined per TRAPNUM)." },
      { "name": "TRAPNUM", "msb": 5, "lsb": 0, "description": "Trap major class (6-bit)." }
    ],
    "bringup_trapnums": [
      { "trapnum": 0, "name": "EXEC_STATE_CHECK", "description": "Target Exec State Check (e.g. illegal ACRE target)." },
      { "trapnum": 4, "name": "ILLEGAL_INST", "description": "Illegal instruction / illegal SSR / illegal encoding." },
      { "trapnum": 5, "name": "BLOCK_TRAP", "description": "Block-level trap (format/legality violations)." },
      { "trapnum": 6, "name": "SCALL", "description": "System call (ACRC)." },
      { "trapnum": 32, "name": "INST_PC_FAULT", "description": "Instruction PC fault (alignment/canonicality)." },
      { "trapnum": 33, "name": "INST_PAGE_FAULT", "description": "Instruction page fault (IFSC in CAUSE)." },
      { "trapnum": 34, "name": "DATA_ALIGN_FAULT", "description": "Data alignment fault." },
      { "trapnum": 35, "name": "DATA_PAGE_FAULT", "description": "Data page fault (DFSC/LaneNum/WnR in CAUSE)." },
      { "trapnum": 44, "name": "INTERRUPT", "description": "Interrupt class (E=1, TRAPARG0=irq_id)." },
      { "trapnum": 49, "name": "HW_BREAKPOINT", "description": "Hardware breakpoint trap." },
      { "trapnum": 50, "name": "SW_BREAKPOINT", "description": "Software breakpoint trap (EBREAK)." },
      { "trapnum": 51, "name": "HW_WATCHPOINT", "description": "Hardware watchpoint trap." }
    ]
  }
}
